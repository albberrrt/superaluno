<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sistema de Pontuação Semanal</title>
  <!-- html2pdf CDN used for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

  <script src="./js/data.js" defer></script>
  <script src="./js/icons.js" defer></script>
  <script src="./js/main.js" defer></script>
  <script src="./js/weekManagement.js" defer></script>
  <script src="./js/export-pdf-script.js" defer></script>

  <link rel="stylesheet" href="./css/styles.css" />
  <link rel="stylesheet" href="./css/header.css" />
</head>

<body>
  <header>
    <h1>Superaluno Semanal</h1>
    <div id="week-selector">
      <button onClick="prevWeek()" class="ghost">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
          class="bi bi-arrow-left-short" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5" />
        </svg>
      </button>
      <div>
        <label for="current-week-label">Semana</label>
        <input type="number" id="current-week-label" onChange="changeToWeek()"></input>
      </div>
      <button onClick="nextWeek()" class="ghost">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
          class="bi bi-arrow-right-short" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8" />
        </svg>
      </button>
    </div>
    <nav class="top-controls">
      <ul>
        <li>
          <button id="addStudentBtn">+ Cadastrar aluno</button>
        </li>
        <li>
          <button id="exportWeekBtn">Exportar PDF da semana</button>
        </li>
        <li>
          <button id="exportStudentBtn">Exportar por aluno</button>
        </li>
        <li>
          <button id="resetWeekBtn" class="ghost">Resetar semana</button>
        </li>
        <!-- <li>
          <button id="themeToggle" class="ghost">Alternar tema</button> Manter temas é um saco, mas não descarto no futuro.
        </li> -->
        <li>
          <div id="dropdownMenu" class="dropdown">
            <button id="dropdownToggle" class="ghost trigger">Backup</button>
            <ul class="dropdown-content">
              <li>
                <label for="backupDataBtn" class="label-data-backup dropdown-item">Backup rápido</label>
                <span>∞</span>
                <input type="button" id="backupDataBtn" style="display:none; opacity: 0;" />
              </li>
              <li>
                <label for="exportDataBtn" class="label-data-export dropdown-item">Exportar dados</label>
                <span>↓</span>
                <input type="button" id="exportDataBtn" style="display:none; opacity: 0;" onClick="exportData()" />
              </li>
              <li>
                <label for="importFileInput" class="label-file-upload dropdown-item">Importar dados</label>
                <span>↑</span>
                <input type="file" id="importFileInput" accept=".json" style="display:none; opacity: 0;"
                  onChange="importData(this.files[0])" />
              </li>
            </ul>
          </div>
        </li>
      </ul>
      </ul>
    </nav>
  </header>
  <div class="container-scroll-fix">
    <div class="container">
      <aside class="sidebar">
        <div class="form-row">
          <label>Pesquisar aluno</label>
          <input type="text" id="searchInput" placeholder="Nome..." />
        </div>
        <div class="form-row">
          <label>Filtro por dia</label>
          <select id="filterDay">
            <option value="all">Todos os dias</option>
            <option value="1">Segunda</option>
            <option value="2">Terça</option>
            <option value="3">Quarta</option>
            <option value="4">Quinta</option>
            <option value="5">Sexta</option>
            <option value="6">Sábado</option>
          </select>
        </div>

        <h3 style="margin-top:8px">Alunos</h3>
        <div class="students-list" id="studentsList"></div>
        <div style="margin-top:8px" class="small">Dica: arraste o card para mover o dia da aula. Crie cards provisórios
          para reposições.</div>
      </aside>

      <main class="main">
        <div class="board" id="board"></div>
      </main>
    </div>
  </div>

  <!-- Templates -->
  <template id="cardTemplate">
    <div class="card" draggable="true">
      <div class="studentHeader">
        <div>
          <strong class="studentName"></strong>
          <!-- <div class="cardDate"></div> Removed due to repeated information-->
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="markAbsent ghost" title="Marcar ausência">Ausente</button>
          <button class="delCard ghost">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3"
              viewBox="0 0 16 16">
              <path
                d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
            </svg>
          </button>
        </div>
      </div>

      <div class="row fade-in">
        <div>Bom comportamento</div>
        <div class="check"><label><input type="checkbox" class="chk-good" /></label></div>
        <div class="check"><label><input type="checkbox" class="chk-no-good" /></label></div>
        <div class="points">-</div>
      </div>
      <div class="row fade-in">
        <div>Trouxe material didático</div>
        <div class="check"><label><input type="checkbox" class="chk-material" /></label></div>
        <div class="check"><label><input type="checkbox" class="chk-no-material" /></label></div>
        <div class="points">-</div>
      </div>
      <div class="row fade-in">
        <div>80% ou mais na avaliação de nível</div>
        <div class="check"><label><input type="checkbox" class="chk-level" /></label></div>
        <div class="check"><label><input type="checkbox" class="chk-no-level" /></label></div>
        <div class="points">-</div>
      </div>
      <div class="row fade-in">
        <div>Realizou projetos extras</div>
        <div class="check"><label><input type="checkbox" class="chk-project" /></label></div>
        <div class="check"><label><input type="checkbox" class="chk-no-project" /></label></div>
        <div class="points">-</div>
      </div>
      <div class="row fade-in">
        <div>Realizou atividades extras</div>
        <div class="check"><label><input type="checkbox" class="chk-activity" /></label></div>
        <div class="check"><label><input type="checkbox" class="chk-no-activity" /></label></div>
        <div class="points">-</div>
      </div>
      <div class="total">
        <div class="small">Total</div>
        <div class="totalPoints">0</div>
      </div>
    </div>
  </template>

  <!-- Modal for creating student -->
  <div class="modal" id="studentModal">
    <div class="modal-content">
      <h3>Cadastrar aluno</h3>
      <div class="modal-error" id="modalError"></div>
      <label for="modalStudentName">Nome do aluno</label>
      <input placeholder="Nome" type="text" id="modalStudentName" maxlength="40" autocomplete="off" />
      <label>Dias de aula</label>
      <div class="modal-days" id="modalDays">
        <label><input type="checkbox" value="1" />Segunda</label>
        <label><input type="checkbox" value="2" />Terça</label>
        <label><input type="checkbox" value="3" />Quarta</label>
        <label><input type="checkbox" value="4" />Quinta</label>
        <label><input type="checkbox" value="5" />Sexta</label>
        <label><input type="checkbox" value="6" />Sábado</label>
      </div>
      <div class="modal-actions">
        <button id="modalCancelBtn" class="ghost">Cancelar</button>
        <button id="modalCreateBtn">Criar</button>
      </div>
    </div>
  </div>

</body>

</html>